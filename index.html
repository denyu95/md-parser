<html>
<head>
    <script src="./md_parser.js" charset="utf-8"></script>
</head>
<body>
    <div style="height:100%; width:100%;">
        <textarea id="mdtext" style="float:left; resize:none; height:100%; width:49.8%;"></textarea>
        <div id="content" style="float:right; border:1px solid #33CC99; height:100%; width:48%; padding-left:2%;"></div>
    </div>
    <script>
        document.getElementById('mdtext').onkeyup = function() {
            document.getElementById('content').innerHTML = md(this.value)
        }
        document.getElementById('mdtext').onkeydown = function(e) {
            if (e.keyCode == 9) {
                e.preventDefault();
                var indent = '    ';
                var start = this.selectionStart;
                var end = this.selectionEnd;
                var selected = window.getSelection().toString();
                selected = indent + selected.replace(/\n/g, '\n' + indent);
                this.value = this.value.substring(0, start) + selected
                        + this.value.substring(end);
                this.setSelectionRange(start + indent.length, start
                        + selected.length);
            }
        }
    </script>
</body>
</html>
